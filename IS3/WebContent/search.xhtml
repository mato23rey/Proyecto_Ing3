<html xmlns="http://www.w3c.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Farmacia Ya</title>
</h:head>
<h:body onload="getLocation()">

	<h:outputStylesheet library="css" name="index.css" />
	<h:outputScript library="js" name="search.js" />
	<h:outputScript library="js" name="index.js" />

	<div style='width: 100%;'>
		<p:panelGrid columns="3" layout="grid">
			<h:graphicImage library="img" name="pYLogo.png" height="60"
				width="150" />

			<h:outputText value="" />

			<p:panelGrid columns="2" layout="grid"
				columnClasses="no-border, no-border" styleClass="textCenter"
				rendered="#{!loginBean.logued}">
				<h:form>
					<h:commandButton action="login" value="Ingresar"
						styleClass="userButton" />
				</h:form>

				<h:form>
					<h:commandButton action="register" value="Registrarse"
						styleClass="userButton" />
				</h:form>
			</p:panelGrid>


			<p:panelGrid columns="2" layout="grid"
				columnClasses="no-border, no-border" styleClass="textCenter"
				rendered="#{loginBean.logued}">
				<h:form>
					<h:commandButton value="Cerrar sesion"
						action="#{loginBean.logout()}" />
				</h:form>

			</p:panelGrid>


		</p:panelGrid>
	</div>

	<div style='width: 100%;' class='textCenter'>
		<h:form>
			<h:outputLabel for="data" value="Farmacia o farmaco" />
			<p:inputText value="#{searchBean.data}" id="data" label="data"
				placeholder="Buscar...">
			</p:inputText>

			<p:commandButton id="loginButton" value="Buscar"
				icon="ui-icon-search" oncomplete="executeSearch()" />
		</h:form>
	</div>

	<h:form>
		<p:dataScroller value="#{searchBean.result}" var="result"
			chunkSize="10" rendered="#{searchBean.withResult}">
			<f:facet name="header">
           Farmacias
        </f:facet>
			<h:panelGrid columns="3" columnClasses="logo,detail">
				<p:graphicImage
					value="http://www.brandsoftheworld.com/sites/default/files/styles/logo-thumbnail/public/112011/logo_farmashop_vertical_diapo.png"
					height="128" width="128" />

				<p:outputPanel>
					<h:panelGrid columns="2" cellpadding="2">
						<h:outputText value="Nombre:" />
						<h:outputText
							value="#{result.pharmacyName} #{result.sucursalName}"
							style="font-weight: bold" />

						<h:outputText value="Direccion:" />
						<h:outputText value="#{result.address}" style="font-weight: bold" />

						<h:outputText value="Calificacion:" />
						<p:rating value="#{result.score}" readonly="true" />
					</h:panelGrid>
				</p:outputPanel>

				<p:commandButton actionListener="#{searchBean.selectCommerce}"
					value="Ver Productos" icon="ui-icon-tag"
					oncomplete="displayCommerce(xhr, status, args)">
					<f:attribute name="comId" value="#{result.id}" />
				</p:commandButton>


			</h:panelGrid>
		</p:dataScroller>

		<p:messages id="messages" showDetail="true" autoUpdate="true"
			closable="true" rendered="#{!searchBean.withResult}" />
	</h:form>

</h:body>

</html>